---
- name: Add yum repo for kubernetes
  blockinfile:
    create: yes
    path: /etc/yum.repos.d/kubernetes.repo
    block: |
      [kubernetes]
      name=Kubernetes
      baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64
      enabled=1
      gpgcheck=1
      repo_gpgcheck=1
      gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg

- name: Add Docker GPG key.
  rpm_key:
    key: https://download.docker.com/linux/centos/gpg
    state: present

- name: Add Docker repository.
  get_url:
    url: https://download.docker.com/linux/centos/docker-ce.repo
    dest: "/etc/yum.repos.d/docker-ce.repo"
    owner: root
    group: root
    mode: 0644

- name: Configure Docker Edge repo.
  ini_file:
    dest: "/etc/yum.repos.d/docker-ce.repo"
    section: "docker-ce-edge"
    option: enabled
    value: "0"

- name: Configure Docker Test repo.
  ini_file:
    dest: "/etc/yum.repos.d/docker-ce.repo"
    section: "docker-ce-test"
    option: enabled
    value: "0"
